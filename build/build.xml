<?xml version="1.0" ?>
<project name="framework" default="build">
	
    <path id="js.lint.classpath">
        <fileset dir="..//ant/">
            <include name="jslint4java-1.3.3.jar"/>
        </fileset>
    </path>
    <taskdef name="jslint" classname="com.googlecode.jslint4java.ant.JSLintTask">
        <classpath>
            <path refid="js.lint.classpath"/>
        </classpath>
    </taskdef>
	
	<target name="build" depends="test">
	</target>
	
	<target name="test" depends="checkstyle">
		<antcall target="php.simpletest.test" />
	</target>
	
	<target name="checkstyle">
		<antcall target="js.lint.test" />
	</target>
	
    <target name="js.lint.test">
        <jslint options="browser,white,onevar,undef,nomen,eqeqeq,plusplus,bitwise,regexp,strict,newcap,immed">
            <predef>jQuery,$$,module,test,ok,equal,expect</predef>            
            <formatter type="plain" />
            <formatter type="xml" destfile="jslint.xml" />
            <fileset dir="../client/js/" >
                <include name="**/*.js" />
				<include name="**/*.qunit" />
                <exclude name="date/**/*.js" />
                <exclude name="jquery/**/*.js" />
                <exclude name="pngFix/**/*.js" />
                <exclude name="reflection/**/*.js" />
                <exclude name="unit/**/*.js" />
            </fileset>
            <fileset dir="../client/js/" >
            	<!-- My Plug-ins -->
            	<include name="jquery/plugins/formAlign/*.js" />
			</fileset>
        </jslint>
    </target>
	
	<target name="php.simpletest.test">
		<exec executable="php" failonerror="true">
			<!-- For XML output from commandline: php framework.runner.test.php -xml -->
			<arg line="/home/travi/include/php/framework/tests/framework.runner.test.php -junit" />
		</exec>
	</target>
</project>
